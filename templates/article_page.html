<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">

    <!-- Theme colors -->
    <meta name="theme-color" content="#1a1a2e">

    <!-- Primary Meta Tags -->
    <title>{{ article.title }} - News123</title>
    <meta name="title" content="{{ article.title }} - News123">
    <meta name="description" content="{{ article.excerpt }}">
    <meta name="author" content="{{ article.author }}">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://news123.com/{{ article.category_slug }}/{{ article.slug }}/">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://news123.com/{{ article.category_slug }}/{{ article.slug }}/">
    <meta property="og:title" content="{{ article.title }}">
    <meta property="og:description" content="{{ article.excerpt }}">
    <meta property="og:image" content="{{ article.image_url | default('https://news123.com/og-image.png') }}">
    <meta property="og:site_name" content="News123">
    <meta property="article:published_time" content="{{ article.published_date }}">
    <meta property="article:section" content="{{ article.category }}">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ article.title }}">
    <meta name="twitter:description" content="{{ article.excerpt }}">
    <meta name="twitter:image" content="{{ article.image_url | default('https://news123.com/og-image.png') }}">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- News123 Brand Styles -->
    <style>
        :root {
            --primary: #1a1a2e;
            --accent: #e94560;
            --text: #1a1a1a;
            --text-light: #666666;
            --bg: #ffffff;
            --bg-light: #f8f9fa;
            --border: #e0e0e0;
            --success: #10b981;
            --font-display: 'Arial Black', 'Helvetica Bold', sans-serif;
            --font-body: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --radius-large: 12px;
            --radius-medium: 8px;
            --shadow-low: 0 2px 8px rgba(0,0,0,0.05);
            --shadow-medium: 0 4px 16px rgba(0,0,0,0.1);
        }

        body {
            background: var(--bg-light);
            color: var(--text);
            font-family: var(--font-body);
        }

        h1, h2 {
            font-family: var(--font-display);
            font-weight: 900;
            letter-spacing: -1px;
            color: var(--primary);
        }

        .logo svg { height: 32px; width: auto; }

        .article-content {
            background: white;
            border-radius: var(--radius-large);
            box-shadow: var(--shadow-low);
        }

        .article-content p {
            margin-bottom: 1.5rem;
            line-height: 1.8;
            font-size: 1.125rem;
        }

        .article-content h2 {
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .category-badge {
            display: inline-block;
            padding: 6px 16px;
            background: var(--accent);
            color: white;
            font-size: 12px;
            font-weight: 600;
            border-radius: 4px;
            text-transform: uppercase;
            text-decoration: none;
        }

        .category-badge:hover {
            opacity: 0.9;
        }

        .related-card {
            background: white;
            padding: 20px;
            border-radius: var(--radius-medium);
            border: 1px solid var(--border);
            transition: all 0.2s;
        }

        .related-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .btn-outline {
            display: inline-block;
            padding: 10px 24px;
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: var(--radius-medium);
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }
    </style>

    <!-- JSON-LD Structured Data: NewsArticle -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "NewsArticle",
      "headline": "{{ article.title }}",
      "description": "{{ article.excerpt }}",
      "image": "{{ article.image_url | default('https://news123.com/og-image.png') }}",
      "datePublished": "{{ article.published_date }}",
      "dateModified": "{{ article.updated_date | default(article.published_date) }}",
      "author": {
        "@type": "Person",
        "name": "{{ article.author }}"
      },
      "publisher": {
        "@type": "Organization",
        "name": "News123",
        "logo": {
          "@type": "ImageObject",
          "url": "https://news123.com/logo.png"
        }
      },
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://news123.com/{{ article.category_slug }}/{{ article.slug }}/"
      }
    }
    </script>
</head>
<body>
    <!-- Header -->
    {% include 'components/header.html' %}

    <!-- Breadcrumb -->
    <nav class="container mx-auto px-4 py-4" aria-label="Breadcrumb">
        <ol class="flex items-center space-x-2 text-sm" style="color: var(--text-light);">
            <li><a href="/" class="hover:underline">Home</a></li>
            <li><span>/</span></li>
            <li><a href="/category/{{ article.category_slug }}/" class="hover:underline">{{ article.category }}</a></li>
            <li><span>/</span></li>
            <li class="truncate" style="color: var(--text);">{{ article.title }}</li>
        </ol>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <!-- Article Header -->
            <article class="article-content p-8 md:p-12 mb-8">
                <header class="mb-8">
                    <a href="/category/{{ article.category_slug }}/" class="category-badge mb-4 inline-block">
                        {{ article.category }}
                    </a>
                    <h1 class="text-3xl md:text-4xl lg:text-5xl mb-6" style="line-height: 1.2;">
                        {{ article.title }}
                    </h1>
                    <div class="flex flex-wrap items-center gap-4 text-sm" style="color: var(--text-light);">
                        <span class="font-semibold" style="color: var(--text);">{{ article.author }}</span>
                        <span>&bull;</span>
                        <time datetime="{{ article.published_date }}">{{ article.published_date_formatted }}</time>
                        {% if article.reading_time %}
                        <span>&bull;</span>
                        <span>{{ article.reading_time }} min read</span>
                        {% endif %}
                    </div>
                </header>

                {% if article.image_url %}
                <figure class="mb-8 -mx-8 md:-mx-12">
                    <img src="{{ article.image_url }}" alt="{{ article.title }}" class="w-full h-auto">
                    {% if article.image_caption %}
                    <figcaption class="text-sm text-center mt-2 px-8" style="color: var(--text-light);">{{ article.image_caption }}</figcaption>
                    {% endif %}
                </figure>
                {% endif %}

                <!-- Article Body -->
                <div class="article-body">
                    {{ article.content | safe }}
                </div>

                <!-- Tags -->
                {% if article.tags %}
                <footer class="mt-8 pt-8" style="border-top: 1px solid var(--border);">
                    <div class="flex flex-wrap gap-2">
                        {% for tag in article.tags %}
                        <a href="/tag/{{ tag.slug }}/" class="px-3 py-1 text-sm rounded-full" style="background: var(--bg-light); color: var(--text-light); text-decoration: none;">
                            #{{ tag.name }}
                        </a>
                        {% endfor %}
                    </div>
                </footer>
                {% endif %}

                <!-- Source Attribution -->
                {% if article.source_url %}
                <div class="mt-8 p-4 rounded-lg" style="background: var(--bg-light);">
                    <p class="text-sm" style="color: var(--text-light);">
                        <strong>Source:</strong>
                        <a href="{{ article.source_url }}" target="_blank" rel="noopener noreferrer" style="color: var(--primary);">
                            {{ article.source }}
                        </a>
                    </p>
                </div>
                {% endif %}
            </article>

            <!-- Related Articles -->
            {% if related_articles %}
            <section class="mb-12">
                <h2 class="text-2xl font-bold mb-6">Related Stories</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {% for related in related_articles %}
                    <a href="/{{ related.category_slug }}/{{ related.slug }}/" class="related-card block" style="text-decoration: none;">
                        <span class="text-xs font-semibold uppercase" style="color: var(--accent);">{{ related.category }}</span>
                        <h3 class="font-bold mt-2 mb-2" style="color: var(--primary);">{{ related.title }}</h3>
                        <p class="text-sm" style="color: var(--text-light);">{{ related.excerpt | truncate(100) }}</p>
                    </a>
                    {% endfor %}
                </div>
            </section>
            {% endif %}

            <!-- Back to Category -->
            <div class="text-center">
                <a href="/category/{{ article.category_slug }}/" class="btn-outline">
                    &larr; More {{ article.category }} News
                </a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    {% include 'components/footer.html' %}
</body>
</html>
