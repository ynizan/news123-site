<!-- Premium API Access Widget for Homepage -->
<div class="rounded-lg p-8 text-white" style="background: linear-gradient(135deg, var(--primary) 0%, #004d99 100%);">
    <div class="flex items-start justify-between mb-4">
        <div class="flex items-center">
            <svg class="w-10 h-10 mr-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a 1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
            </svg>
            <div>
                <h3 class="text-2xl font-bold" style="color: white;">API Access for Developers</h3>
            </div>
        </div>
    </div>

    <p class="text-lg mb-6" style="color: rgba(255,255,255,0.9);">Integrate permit data directly into your application. RESTful API with comprehensive documentation and webhook support.</p>

    <!-- Code Example Box -->
    <div class="relative p-4 bg-white rounded-xl border border-gray-300 shadow-sm mb-6">
        <!-- Copy Button (icon only) -->
        <button
            class="absolute top-3 right-3 p-2 rounded-md hover:bg-gray-200 transition"
            onclick="copyCode()"
            title="Copy to clipboard"
        >
            <svg xmlns="http://www.w3.org/2000/svg"
                width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="#2563eb" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4
                        a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
        </button>

        <pre id="api-code" class="text-sm font-mono whitespace-pre-wrap text-gray-800">
    # GET all California permits
    curl https://api.permitindex.com/v1/permits?state=CA \
    -H "Authorization: Bearer YOUR_API_KEY"
        </pre>
    </div>

    <!-- Feature Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">

        <!-- REST API -->
        <div class="bg-white p-5 rounded-xl shadow-sm">
        <div class="mb-2 text-blue-600">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16v6H4z"></path>
            <path d="M4 14h16v6H4z"></path>
            <path d="M9 4v6"></path>
            <path d="M9 14v6"></path>
            </svg>
        </div>
        <h4 class="font-semibold text-gray-900">RESTful JSON API</h4>
        <p class="text-sm text-gray-500">Clean, intuitive endpoints</p>
        </div>

        <!-- Requests -->
        <div class="bg-white p-5 rounded-xl shadow-sm">
        <div class="mb-2 text-blue-600">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="13 2 3 14 12 14 11 22 21 10 13 10 13 2"></polygon>
            </svg>
        </div>
        <h4 class="font-semibold text-gray-900">1,000 Requests / Day</h4>
        <p class="text-sm text-gray-500">Included with Business tier</p>
        </div>

        <!-- Webhooks -->
        <div class="bg-white p-5 rounded-xl shadow-sm">
        <div class="mb-2 text-blue-600">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
        </div>
        <h4 class="font-semibold text-gray-900">Change Webhooks</h4>
        <p class="text-sm text-gray-500">Real-time event notifications</p>
        </div>

        <!-- Documentation -->
        <div class="bg-white p-5 rounded-xl shadow-sm">
        <div class="mb-2 text-blue-600">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M4 4.5A2.5 2.5 0 0 1 6.5 7H20"></path>
            <path d="M20 22V2"></path>
            </svg>
        </div>
        <h4 class="font-semibold text-gray-900">Full Documentation</h4>
        <p class="text-sm text-gray-500">Interactive API reference</p>
        </div>
    </div>

    <!-- CTA Buttons -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <button
            class="px-6 py-3 rounded-lg font-bold transition"
            style="background: white; color: var(--primary);"
            onmouseover="this.style.opacity='0.9'"
            onmouseout="this.style.opacity='1'"
            onclick="handleAPIBusinessClick()"
        >
            Get API Access • $99/mo
        </button>
        <button
            class="px-6 py-3 rounded-lg font-bold transition border-2"
            style="background: transparent; color: white; border-color: white;"
            onmouseover="this.style.background='rgba(255,255,255,0.1)'"
            onmouseout="this.style.background='transparent'"
            onclick="handleAPIEnterpriseClick()"
        >
            Enterprise? Talk to Us
        </button>
    </div>

    <p class="text-sm text-center mt-4" style="color: rgba(255,255,255,0.8);">
        Business tier includes unlimited alerts + CSV exports + historic data<br>
        <a href="/pricing/" style="color: white; text-decoration: underline;">Compare all plans →</a>
    </p>
</div>

<script>

function copyCode() {
    const code = document.getElementById("api-code").innerText;
    navigator.clipboard.writeText(code);
}

function handleAPIBusinessClick() {
    // Track the click
    if (typeof plausible !== 'undefined') {
        plausible('API Access CTA Click', {
            props: {
                type: 'business',
                source: 'homepage'
            }
        });
    }

    // Redirect to coming soon page
    window.location.href = '/coming-soon/?feature=api&plan=business';
}

function handleAPIEnterpriseClick() {
    // Track the click
    if (typeof plausible !== 'undefined') {
        plausible('API Access CTA Click', {
            props: {
                type: 'enterprise',
                source: 'homepage'
            }
        });
    }

    // Redirect to contact form
    window.location.href = '/contact/';
}
</script>
